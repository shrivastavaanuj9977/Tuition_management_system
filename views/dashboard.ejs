<% var pageTitle="Dashboard" ; %>
    <% include partials/header %>
        <!-- Main Content -->
        <div class="container">
            <h1 class="page-title">Dashboard</h1>

            <!-- Stats Grid -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon blue">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-content">
                        <h3>Total Students</h3>
                        <div class="number">
                            <%= totalStudents %>
                        </div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon green">
                        <i class="fas fa-chalkboard-user"></i>
                    </div>
                    <div class="stat-content">
                        <h3>Total Teachers</h3>
                        <div class="number">
                            <%= totalTeachers %>
                        </div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon orange">
                        <i class="fas fa-book"></i>
                    </div>
                    <div class="stat-content">
                        <h3>Active Courses</h3>
                        <div class="number">
                            <%= totalCourses %>
                        </div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon purple">
                        <i class="fas fa-rupee-sign"></i>
                    </div>
                    <div class="stat-content">
                        <h3>Monthly Revenue</h3>
                        <div class="number">â‚¹<%= totalPayments %>
                        </div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon blue">
                        <i class="fas fa-user-check"></i>
                    </div>
                    <div class="stat-content">
                        <h3>Present Today</h3>
                        <div class="number">
                            <%= presentToday %>
                        </div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon green">
                        <i class="fas fa-user-clock"></i>
                    </div>
                    <div class="stat-content">
                        <h3>Absent Today</h3>
                        <div class="number">
                            <%= absentToday %>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Attendance -->
            <div class="section-box">
                <div class="section-header">
                    <h2>Today's Attendance</h2>
                    <a href="/attendance/mark" class="view-all-btn">Mark Attendance</a>
                </div>

                <table>
                    <thead>
                        <tr>
                            <th>Student Name</th>
                            <th>Date</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% if (recentAttendance && recentAttendance.length> 0) { %>
                            <% recentAttendance.forEach(record=> { %>
                                <tr>
                                    <td>
                                        <%= record.name %>
                                    </td>
                                    <td>
                                        <%= record.date %>
                                    </td>
                                    <td>
                                        <span
                                            class="status-badge <% if (record.status === 'Present') { %>status-active<% } else { %>status-pending<% } %>">
                                            <%= record.status %>
                                        </span>
                                    </td>
                                </tr>
                                <% }); %>
                                    <% } else { %>
                                        <tr>
                                            <td colspan="3" class="no-data">No attendance records for today</td>
                                        </tr>
                                        <% } %>
                    </tbody>
                </table>
            </div>

            <!-- Recent Enrollments -->
            <div class="section-box">
                <div class="section-header">
                    <h2>Recent Enrollments</h2>
                    <a href="/courses" class="view-all-btn">View All Courses</a>
                </div>

                <table>
                    <thead>
                        <tr>
                            <th>Student</th>
                            <th>Course</th>
                            <th>Enrollment Date</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="4" class="no-data">No recent enrollments</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <% include partials/footer %>